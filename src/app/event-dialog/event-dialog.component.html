<div class="container">
    <h2 mat-dialog-title class="m-3">Create an Event</h2>
    <form class="m-3" [formGroup]="form" (ngSubmit)="submit()">
        <mat-form-field class="mb-3">
            <mat-label>Test Input field</mat-label>
            <input
                matInput
                placeholder="Placeholder"
                value="Test value"
                formControlName="title"
            />
        </mat-form-field>

        <mat-checkbox formControlName="isMultipleDate"
            >Multiple Dates</mat-checkbox
        >

        @if (form.controls.isMultipleDate.value) {
        <mat-form-field class="mb-3">
            <mat-label>Enter a date range</mat-label>
            <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
                <input
                    matStartDate
                    formControlName="start"
                    placeholder="Start date"
                />
                <input
                    matEndDate
                    formControlName="end"
                    placeholder="End date"
                />
            </mat-date-range-input>
            <mat-hint>MM/DD/YYYY â€“ MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle
                matIconSuffix
                [for]="picker"
            ></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>

            @if (range.controls.start.hasError('matStartDateInvalid')) {
            <mat-error>Invalid start date</mat-error>
            } @if (range.controls.end.hasError('matEndDateInvalid')) {
            <mat-error>Invalid end date</mat-error>
            }
        </mat-form-field>
        } @else {
        <mat-form-field class="mb-3">
            <mat-label>Choose a date</mat-label>
            <input formControlName="date" matInput [matDatepicker]="picker" />
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle
                matIconSuffix
                [for]="picker"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
        }

        <mat-form-field class="mb-3">
            <mat-label>Location</mat-label>
            <input
                type="text"
                placeholder="Pick one"
                aria-label="Location"
                matInput
                [formControl]="address"
                [matAutocomplete]="location"
            />
            <mat-autocomplete
                [displayWith]="displayFn"
                #location="matAutocomplete"
            >
                @for (location of searchResultObs | async; track
                location.placeId) {
                <mat-option [value]="location">{{
                    location.formattedAddress
                }}</mat-option>
                }
            </mat-autocomplete>
        </mat-form-field>
        <button class="btn btn-primary mb-3" type="submit">
            {{ isEditMode ? "Update" : "Save" }}
        </button>
    </form>
</div>
